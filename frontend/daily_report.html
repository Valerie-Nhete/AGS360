<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AgriSense360 - Daily Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
            position: relative;
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .logo {
            max-width: 120px;
            margin-top: 30px;
        }

        .heading {
            color: #2E7D32;
            font-weight: bold;
        }

        .shape { 
            position: absolute; 
            width: 200px; 
            height: 200px; 
            background: radial-gradient(circle at center, #C8E6C9, transparent 70%); 
            border-radius: 50%; 
            z-index: 0; 
        }

        .shape.top-left { top: -50px; left: -50px; }
        .shape.bottom-right { bottom: -50px; right: -50px; }

        .btn-leaf {
            background: #4CAF50;
            border: none;
            color: white;
            font-size: 18px;
            font-weight: bold;
            padding: 12px 24px;
            width: 100%;
            border-top-left-radius: 40px;
            border-bottom-right-radius: 40px;
            transition: background 0.3s, transform 0.2s;
            margin-top: 20px;
        }

        .btn-leaf:hover {
            background: #388E3C;
            transform: scale(1.02);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: #ffffff;
            border-top: 1px solid #ccc;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 2;
        }
        .bottom-nav a {
            color: #4CAF50;
            font-weight: bold;
            text-decoration: none;
        }
        .bottom-nav a:hover {
            text-decoration: underline;
        }

        .section-heading {
            color: #2E7D32;
            font-weight: bold;
            margin-top: 40px;
        }
    </style>
</head>

<body>

    <!-- Soft Shapes -->
    <div class="shape top-left"></div>
    <div class="shape bottom-right"></div>

    <div class="container position-relative text-center" style="z-index: 1;">
        <img src="ags_logo.jpg" alt="AGS Logo" class="logo">

        <h1 class="mt-4 mb-4 heading">Daily Report</h1>

        <!-- Table to show results -->
        <div class="table-responsive">
            <table class="table table-bordered" id="input-table">
                <thead class="table-success">
                    <tr>
                        <th>Label</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Soil pH</td><td id="soil-ph">Loading...</td></tr>
                    <tr><td>Microbial Health</td><td id="microbial-health">Loading...</td></tr>
                    <tr><td>Soil Moisture</td><td id="soil-moisture">Unavailable</td></tr>
                    <tr><td>Temperature</td><td id="temperature">Loading...</td></tr>
                    <tr><td>Weather Description</td><td id="weather-description">Loading...</td></tr>
                    <tr><td>Time Recorded</td><td id="timestamp">Loading...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Section for Crop Suggestions and Estimates -->
        <h2 class="section-heading">Crop Suggestions and Estimates</h2>
        <div class="text-start" style="font-size: 18px; padding: 10px;">
            <p><strong>Crop Suggestions:</strong> <span id="crop-suggestions">Loading...</span></p>
            <p><strong>Estimated Yield:</strong> <span id="estimated-yield">Loading...</span></p>
            <p><strong>Estimated Profit:</strong> <span id="estimated-profit">Loading...</span></p>
        </div>

        <button onclick="exportData()" class="btn btn-leaf">Export Report</button>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="dashboard.html">Home</a>
        <a href="data_collection.html">Data</a>
        <a href="history.html">History</a>
        <a href="social_hub.html">Social Hub</a>
    </div>

    <script src="script.js"></script>
    <script>
        // Populate the inputs and outputs
        const backendData = JSON.parse(sessionStorage.getItem("backendResults"));

        if (backendData) {
            document.getElementById("soil-ph").textContent = sessionStorage.getItem("soil_ph") || "Unknown";
            document.getElementById("microbial-health").textContent = sessionStorage.getItem("microbial_health") || "Unknown";
            document.getElementById("temperature").textContent = backendData.temperature + " Â°C";
            document.getElementById("weather-description").textContent = backendData.weather_description;
            document.getElementById("timestamp").textContent = new Date().toLocaleString();
            document.getElementById("crop-suggestions").textContent = backendData.crop_suggestions.join(", ");
            document.getElementById("estimated-yield").textContent = backendData.estimated_yield + " tonnes";
            document.getElementById("estimated-profit").textContent = "$" + backendData.estimated_profit;
        }
    </script>

</body>
</html>
